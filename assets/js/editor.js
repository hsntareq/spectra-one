(()=>{"use strict";const e=window.wp.element,t=window.wp.plugins,n=window.wp.editPost,a=window.wp.compose,s=window.wp.data,i=window.wp.i18n,l={logo:(0,e.createElement)("svg",{className:"swt-page-settings-button",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 70 70",fill:"none"}," ",(0,e.createElement)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M35 70C54.33 70 70 54.33 70 35C70 15.67 54.33 0 35 0C15.67 0 0 15.67 0 35C0 54.33 15.67 70 35 70ZM24.4471 23.5112C18.9722 26.7403 20.2852 35.3759 26.5032 37.0351L36.8875 39.806C37.7533 40.037 37.91 41.224 37.135 41.6811L27.0972 47.5799L26.036 58L45.5529 46.4888C51.0278 43.2597 49.7148 34.6241 43.4968 32.9649L33.1125 30.1941C32.2467 29.963 32.09 28.776 32.865 28.3189L42.9028 22.4202L43.964 12L24.4471 23.5112Z"})," ")};function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r.apply(this,arguments)}const o=window.wp.components,c=window.wp.blockEditor,d=window.wp.hooks,u=t=>{let n,a;return t.hasOwnProperty("setAttributes")?(n=!(!t?.attributes?.SWTStickyHeader||!t.attributes.SWTStickyHeader),a=!(!t?.attributes?.SWTTransparentHeader||!t.attributes.SWTTransparentHeader)):(n=!(!t?.meta._swt_meta_sticky_header||!t.meta._swt_meta_sticky_header),a=!(!t?.meta._swt_meta_transparent_header||!t.meta._swt_meta_transparent_header)),(0,e.createElement)(e.Fragment,null,!a&&(0,e.createElement)(o.PanelRow,null,(0,e.createElement)(o.ToggleControl,{label:(0,i.__)("Enable Sticky Header","spectra-one"),help:n?(0,i.__)("Transparent header option will be disabled on enabling this option.","spectra-one"):"",checked:n,onChange:e=>t.hasOwnProperty("setAttributes")?t.setAttributes({SWTStickyHeader:!n}):t.setMetaFieldValue(e,"_swt_meta_sticky_header")})),!n&&(0,e.createElement)(o.PanelRow,null,(0,e.createElement)(o.ToggleControl,{label:(0,i.__)("Enable Transparent Header","spectra-one"),help:a?(0,i.__)("Sticky header option will be disabled on enabling this option.","spectra-one"):"",checked:a,onChange:e=>t.hasOwnProperty("setAttributes")?t.setAttributes({SWTTransparentHeader:!a}):t.setMetaFieldValue(e,"_swt_meta_transparent_header")})))},m=(0,a.createHigherOrderComponent)((t=>n=>{const{attributes:a,name:s}=n;return console.log(n),a?.tagName&&"header"===a.tagName&&"core/template-part"===s?(0,e.createElement)(e.Fragment,null,(0,e.createElement)(t,n),(0,e.createElement)(c.InspectorControls,null,(0,e.createElement)(o.Panel,null,(0,e.createElement)(o.PanelBody,{title:"Header Settings",initialOpen:!0},(0,e.createElement)(u,n))))):(0,e.createElement)(e.Fragment,null,(0,e.createElement)(t,n))}),"Header");(0,d.addFilter)("editor.BlockEdit","swt/header",m),(0,d.addFilter)("blocks.registerBlockType","swt/header-attributes",(function(e){return["core/template-part"].includes(e.name)&&e.attributes&&(e.attributes=Object.assign(e.attributes,{SWTStickyHeader:{type:"boolean",default:!1},SWTTransparentHeader:{type:"boolean",default:!1}})),e}));const p=(0,a.createHigherOrderComponent)((t=>n=>{const{name:a,attributes:s}=n;if(["core/template-part"].includes(a)){const{SWTTransparentHeader:a}=s,i="\n\t\t\t\t.block-editor-block-list__block.swt-transparent-header {\n\t\t\t\t\tposition: absolute;\n\t\t\t\t\ttop: 0;\n\t\t\t\t\tleft: 0;\n\t\t\t\t\twidth: 100%;\n\t\t\t\t\tz-index: 999;\n\t\t\t\t\tmargin-top: 0;\n\t\t\t\t}\n\n\t\t\t\t.swt-transparent-header > .has-background {\n\t\t\t\t\tbackground: transparent !important;\n\t\t\t\t}\n\t\t\t";return(0,e.createElement)(e.Fragment,null,a&&(0,e.createElement)("style",null,i),(0,e.createElement)(t,r({},n,{className:`${n?.className?`${n.className} `:""}${a?"swt-transparent-header ":""}`})))}return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(t,n))}),"HeaderCss");(0,d.addFilter)("editor.BlockListBlock","swt/header-css",p);const b=window.React,g=()=>{const{activationUrl:t,pluginSlug:n,pluginStatus:a}=spectraOne;let s=[];"activated"!==a&&"installed"===a&&(s={initialText:"Activate Spectra",progressText:"Activating Spectra...",errorText:"Error activating Spectra",SuccessText:"Spectra Activated"}),"installed"!==a&&"activated"!==a&&(s={initialText:"Install & Activate Spectra",progressText:"Installing & Activating Spectra...",errorText:"Error installing Spectra",SuccessText:"Spectra Installed & Activated"});const{initialText:l,progressText:r,errorText:c,SuccessText:d}=s,[u,m]=(0,b.useState)(!1),[p,g]=(0,b.useState)(l),[w,h]=(0,b.useState)(!1),_=async e=>{!0===(await async function(e){try{if(200===(await fetch(e)).status)return{success:!0}}catch(e){return{success:!1}}}(e)).success?(m(!1),g(d),location.reload()):(g(c),m(!1),setTimeout((()=>{g(d),m(!1),h(!1)}),2e3))};return(0,e.createElement)(o.PanelBody,{title:(0,i.__)("Spectra plugin","spectra-one"),initialOpen:!0},(0,e.createElement)("p",null,(0,i.__)("Power-up your website with advanced and powerful blocks that help you build websites in no time!","spectra-one")),(0,e.createElement)(o.Button,{className:`swt-full-width-btn ${!0===u?"is-busy ":""} `,onClick:()=>(async(e,t)=>{if(!1===w)if(g(r),m(!0),h(!0),"activated"!==a&&"installed"===a)_(t);else try{await async function(e){return new Promise((t=>{wp.updates.ajax("install-plugin",{slug:e,success:()=>{t({success:!0})},error:e=>{t({success:!1,code:e.errorCode})}})}))}(e),_(t)}catch(e){"folder_exists"===e.errorCode&&_(t)}})(n,t),isPrimary:!0,"aria-disabled":w},p))},w=t=>{const n=Object.entries(spectraOne.disable_sections).map((n=>{let[a,s]=n;const i=!(!t?.meta[s.key]||!t.meta[s.key]);return(0,e.createElement)(o.PanelRow,{key:a},(0,e.createElement)(o.ToggleControl,{key:a,label:s.label,checked:i,onChange:e=>{t.setMetaFieldValue(e,s.key)}}))}));return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(o.PanelBody,{title:(0,i.__)("Disable Elements","spectra-one"),initialOpen:!0,className:"swt-disable-elements-panel"},n),!t?.meta?._swt_meta_header_display&&(0,e.createElement)(o.PanelBody,{title:(0,i.__)("Header Settings","spectra-one"),initialOpen:!0,className:"swt-header-settings-panel"},(0,e.createElement)(u,r({},t,spectraOne.header_settings))),"activated"!==spectraOne.pluginStatus&&(0,e.createElement)(g,t))},h=(0,a.compose)((0,s.withSelect)((e=>{const t=e("core/editor").getEditedPostAttribute("meta"),n=e("core/editor").getCurrentPostAttribute("meta");return{meta:{...n,...t},oldMeta:n}})),(0,s.withDispatch)((e=>({setMetaFieldValue:(t,n)=>e("core/editor").editPost({meta:{[n]:t}})}))))((t=>(0,e.createElement)(e.Fragment,null,(0,e.createElement)(n.PluginSidebarMoreMenuItem,{target:"swt-page-settings-panel",icon:l.logo},(0,i.__)("Spectra Page Settings","spectra-one")),(0,e.createElement)(n.PluginSidebar,{isPinnable:!0,icon:l.logo,name:"swt-page-settings-panel",title:(0,i.__)("Spectra Page Settings","spectra-one"),className:"swt-sidebar"},(0,e.createElement)(w,t)))));window.addEventListener("load",(function(){(0,s.subscribe)((function(){setTimeout((function(){const e=document.querySelector(".editor-styles-wrapper");null!==e&&(parseInt(e.offsetWidth)<1350?(e.classList.remove("swt-stacked-title-visibility"),e.classList.add("swt-stacked-title-visibility")):e.classList.remove("swt-stacked-title-visibility"));const t=document.querySelector(".title-visibility"),n=document.querySelector(".edit-post-visual-editor__post-title-wrapper");if(null===t&&null!==n){let e="";(0,s.select)("core/editor").getEditedPostAttribute("meta")?._swt_meta_site_title_display&&!0===(0,s.select)("core/editor").getEditedPostAttribute("meta")._swt_meta_site_title_display?(e='<span class="dashicons dashicons-hidden title-visibility" data-tooltip="Enable Title"></span>',n.classList.toggle("invisible")):e='<span class="dashicons dashicons-visibility title-visibility" data-tooltip="Disable Title"></span>',n.insertAdjacentHTML("beforeend",e),document.querySelector(".title-visibility").addEventListener("click",(function(){n.classList.toggle("invisible"),this.classList.contains("dashicons-hidden")?(this.classList.add("dashicons-visibility"),this.classList.remove("dashicons-hidden"),this.dataset.tooltip="Disable Title",(0,s.dispatch)("core/editor").editPost({meta:{_swt_meta_site_title_display:!1}})):(this.classList.add("dashicons-hidden"),this.classList.remove("dashicons-visibility"),this.dataset.tooltip="Enable Title",(0,s.dispatch)("core/editor").editPost({meta:{_swt_meta_site_title_display:!0}}))}))}const a=document.querySelector(".editor-post-title__input"),i=document.querySelector(".title-visibility");null!==a&&null!==i&&(document.addEventListener("click",(function(e){n.contains(e.target)||(i.classList.remove("swt-show-visibility-icon"),a.classList.remove("swt-show-editor-title-outline"))})),document.addEventListener("visibilitychange",(function(){i.classList.remove("swt-show-visibility-icon"),a.classList.remove("swt-show-editor-title-outline")})),n.addEventListener("focusout",(function(){i.classList.remove("swt-show-visibility-icon"),a.classList.remove("swt-show-editor-title-outline")})),n.addEventListener("click",(function(){i.classList.add("swt-show-visibility-icon"),a.classList.add("swt-show-editor-title-outline")})),a.addEventListener("input",(function(){i.classList.add("swt-show-visibility-icon"),this.classList.add("swt-show-editor-title-outline")}))),document.querySelectorAll(".is-tablet-preview, .is-mobile-preview").length?document.body.classList.add("responsive-enabled"):document.body.classList.remove("responsive-enabled")}),1)}))}));const _=["core/archives","core/calendar","core/latest-comments","core/tag-cloud","core/rss"],y=(0,a.createHigherOrderComponent)((t=>n=>{const{attributes:a,name:s,setAttributes:l}=n,{SWTHideDesktop:r,SWTHideTab:d,SWTHideMob:u}=a;return s&&s.includes("core/")&&!_.includes(s)?(0,e.createElement)(e.Fragment,null,(0,e.createElement)(t,n),(0,e.createElement)(c.InspectorControls,null,(0,e.createElement)(o.Panel,null,(0,e.createElement)(o.PanelBody,{title:"Responsive Settings",initialOpen:!0},(0,e.createElement)(o.PanelRow,null,(0,e.createElement)(o.ToggleControl,{label:(0,i.__)("Hide Desktop","spectra-one"),checked:r,onChange:()=>l({SWTHideDesktop:!r})})),(0,e.createElement)(o.PanelRow,null,(0,e.createElement)(o.ToggleControl,{label:(0,i.__)("Hide Tablet","spectra-one"),checked:d,onChange:()=>l({SWTHideTab:!d})})),(0,e.createElement)(o.PanelRow,null,(0,e.createElement)(o.ToggleControl,{label:(0,i.__)("Hide Mobile","spectra-one"),checked:u,onChange:()=>l({SWTHideMob:!u})})))))):(0,e.createElement)(e.Fragment,null,(0,e.createElement)(t,n))}),"Responsive");(0,d.addFilter)("editor.BlockEdit","swt/responsive",y),(0,d.addFilter)("blocks.registerBlockType","swt/responsive-attributes",(function(e){const{name:t,attributes:n}=e;return t&&t.includes("core/")&&!_.includes(t)&&n&&(e.attributes=Object.assign(n,{SWTHideDesktop:{type:"boolean",default:!1},SWTHideTab:{type:"boolean",default:!1},SWTHideMob:{type:"boolean",default:!1}})),e}));const E=(0,a.createHigherOrderComponent)((t=>n=>{const{name:a,attributes:s}=n;if(a&&a.includes("core/")&&!_.includes(a)){const{SWTHideDesktop:a,SWTHideTab:i,SWTHideMob:l}=s;return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(t,r({},n,{className:`${n?.className?`${n.className} `:""}${a?"swt-hide-desktop ":""}${i?"swt-hide-tablet ":""}${l?"swt-hide-mobile ":""}`})))}return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(t,n))}),"responsiveCss");(0,d.addFilter)("editor.BlockListBlock","swt/responsive-css",E);const v=(0,a.createHigherOrderComponent)((t=>n=>{const{name:a,attributes:s}=n;if("core/latest-posts"!==a)return(0,e.createElement)(t,n);const{displayFeaturedImage:i}=s;return(0,e.createElement)(t,r({},n,{className:`${n?.className?`${n.className} `:""}${i?"swt-has-featured-image ":""}`}))}),"latestPostList");(0,d.addFilter)("editor.BlockListBlock","swt/latest-post-list",v),(0,window.wp.blocks.registerBlockType)("swt/sticky-add-to-cart",{title:(0,i.__)("Sticky Add To Cart","spectra-one"),icon:"smiley",category:"common",attributes:{SWTPosition:{type:"string",default:"bottom"}},edit:function(t){const{attributes:n,setAttributes:a}=t,{SWTPosition:s}=n;return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(c.InspectorControls,null,(0,e.createElement)(o.Panel,null,(0,e.createElement)(o.PanelBody,{title:"Stick Add To Cart Settings",initialOpen:!0},(0,e.createElement)(o.__experimentalToggleGroupControl,{label:"Position",value:s,onChange:e=>a({SWTPosition:e}),isBlock:!0},(0,e.createElement)(o.__experimentalToggleGroupControlOption,{value:"top",label:"Top"}),(0,e.createElement)(o.__experimentalToggleGroupControlOption,{value:"bottom",label:"Bottom"}))))),(0,e.createElement)(c.InnerBlocks,{template:[["core/group",{className:"swt-sticky-add-to-cart",backgroundColor:"background",attributes:{SWTHideMob:!0},layout:{type:"constrained"},tagName:"div"},[["core/columns",{align:"wide",isStackedOnMobile:!1,verticalAlignment:"center"},[["core/column",{verticalAlignment:"center",SWTHideMob:!0},[["core/post-title",{isLink:!1,level:5,linkTarget:"_self",rel:""}]]],["core/column",{verticalAlignment:"center"},[["core/group",{className:"swt-mobile-space-between",layout:{flexWrap:"nowrap",justifyContent:"right",type:"flex"},tagName:"div"},[["woocommerce/product-price",{isDescendentOfQueryLoop:!0,isDescendentOfSingleProductBlock:!1,isDescendentOfSingleProductTemplate:!1}],["woocommerce/add-to-cart-form",{}]]]]]]]]]]}))},save:function(){return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(c.InnerBlocks.Content,null))}}),spectraOne.is_spectra_plugin&&(0,d.addFilter)("spectra.page-sidebar.before","swt/setting-list",(function(t,n){return(0,e.createElement)(e.Fragment,null,t,(0,e.createElement)(w,n))}),10),spectraOne.is_spectra_plugin||(0,t.registerPlugin)("swt-page-level-settings",{render:h})})();