{"version":3,"file":"welcome_notice.js","mappings":"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","sources":["webpack://spectra-one/./src/components/plugin-helpers.js","webpack://spectra-one/webpack/bootstrap","webpack://spectra-one/webpack/runtime/define property getters","webpack://spectra-one/webpack/runtime/hasOwnProperty shorthand","webpack://spectra-one/webpack/runtime/make namespace object","webpack://spectra-one/./src/admin/welcome-notice.js"],"sourcesContent":["export async function installPlugin( slug ) {\r\n\treturn new Promise( ( resolve ) => {\r\n\t\twp.updates.ajax( 'install-plugin', {\r\n\t\t\tslug,\r\n\t\t\tsuccess: () => {\r\n\t\t\t\tresolve( { success: true } );\r\n\t\t\t},\r\n\t\t\terror: ( err ) => {\r\n\t\t\t\tresolve( { success: false, code: err.errorCode } );\r\n\t\t\t},\r\n\t\t} );\r\n\t} );\r\n}\r\n\r\nexport async function activatePluginUrl( url ) {\r\n\ttry {\r\n\t\tconst reqResponse = await fetch( url );\r\n\r\n\t\tif ( 200 === reqResponse.status ) {\r\n\t\t\treturn { success: true };\r\n\t\t}\r\n\t} catch ( err ) {\r\n\t\treturn { success: false };\r\n\t}\r\n}\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import {\r\n\tactivatePluginUrl,\r\n\tinstallPlugin,\r\n} from '../components/plugin-helpers.js';\r\n\r\ndocument.addEventListener( 'DOMContentLoaded', () => {\r\n\thandleWelcomeNotice();\r\n} );\r\n\r\nfunction handleWelcomeNotice() {\r\n\tconst {\r\n\t\tactivating,\r\n\t\tinstalling,\r\n\t\tdone,\r\n\t\tactivationUrl,\r\n\t\tajaxUrl,\r\n\t\tpluginSlug,\r\n\t\tnonce,\r\n\t\tpluginStatus,\r\n\t} = spectraOne;\r\n\r\n\tlet installStatusText;\r\n\tconst CloseButton = document.querySelector(\r\n\t\t'.swt-welcome-notice .notice-dismiss'\r\n\t);\r\n\tconst WelcomeNoticeContainer = document.querySelector(\r\n\t\t'.swt-welcome-notice'\r\n\t);\r\n\tconst InstallButton = document.querySelector(\r\n\t\t'.swt-welcome-notice #swt-install-spectra'\r\n\t);\r\n\tif ( InstallButton ) {\r\n\t\tinstallStatusText = InstallButton.querySelector( '.text' );\r\n\t}\r\n\r\n\tconst hideAndRemoveNotice = () => {\r\n\t\tif ( WelcomeNoticeContainer ) {\r\n\t\t\tWelcomeNoticeContainer.remove();\r\n\t\t}\r\n\t};\r\n\r\n\tconst activateSpectra = async () => {\r\n\t\tinstallStatusText.textContent = activating;\r\n\t\tawait activatePluginUrl( activationUrl );\r\n\r\n\t\tInstallButton.classList.remove( 'updating-message' );\r\n\t\tInstallButton.classList.add( 'updated-message' );\r\n\r\n\t\tinstallStatusText.textContent = done;\r\n\t\tsetTimeout( hideAndRemoveNotice, 2000 );\r\n\t};\r\n\r\n\tif ( InstallButton ) {\r\n\t\tInstallButton.addEventListener( 'click', async () => {\r\n\t\t\tInstallButton.classList.add( 'updating-message' );\r\n\t\t\tInstallButton.classList.add( 'disabled' );\r\n\r\n\t\t\tif ( pluginStatus === 'installed' ) {\r\n\t\t\t\tawait activateSpectra();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tinstallStatusText.textContent = installing;\r\n\t\t\tawait installPlugin( pluginSlug );\r\n\t\t\tawait activateSpectra();\r\n\t\t} );\r\n\t}\r\n\r\n\tCloseButton.addEventListener( 'click', async () => {\r\n\t\tconst res = {\r\n\t\t\tmethod: 'POST',\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type':\r\n\t\t\t\t\t'application/x-www-form-urlencoded; charset=UTF-8',\r\n\t\t\t},\r\n\t\t\tbody: `action=swt_dismiss_welcome_notice&nonce=${ nonce }`,\r\n\t\t};\r\n\r\n\t\ttry {\r\n\t\t\tconst reqResponse = await fetch( ajaxUrl, res );\r\n\r\n\t\t\tif ( 200 === reqResponse.status ) {\r\n\t\t\t\thideAndRemoveNotice();\r\n\t\t\t}\r\n\t\t} catch ( err ) {}\r\n\t} );\r\n}\r\n"],"names":["installPlugin","slug","Promise","resolve","wp","updates","ajax","success","error","err","code","errorCode","activatePluginUrl","url","reqResponse","fetch","status","document","addEventListener","handleWelcomeNotice","activating","installing","done","activationUrl","ajaxUrl","pluginSlug","nonce","pluginStatus","spectraOne","installStatusText","CloseButton","querySelector","WelcomeNoticeContainer","InstallButton","hideAndRemoveNotice","remove","activateSpectra","textContent","classList","add","setTimeout","res","method","headers","body"],"sourceRoot":""}