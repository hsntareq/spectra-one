{"version":3,"file":"welcome_notice.js","mappings":"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","sources":["webpack://spectra-theme/./src/admin/welcome-notice.js"],"sourcesContent":["document.addEventListener('DOMContentLoaded', () => {\r\n\thandleWelcomeNotice();\r\n});\r\n\r\nfunction handleWelcomeNotice() {\r\n\tconst {\r\n\t\tactivating,\r\n\t\tinstalling,\r\n\t\tdone,\r\n\t\tactivationUrl,\r\n\t\tajaxUrl,\r\n\t\tpluginSlug,\r\n\t\tnonce,\r\n\t\tpluginStatus,\r\n\t} = spectra;\r\n\r\n\tlet installStatusText;\r\n\tlet loadingIcon;\r\n\tconst CloseButton = document.querySelector('.swt-welcome-notice .notice-dismiss');\r\n\tconst WelcomeNoticeContainer = document.querySelector('.swt-welcome-notice');\r\n\tconst InstallButton = document.querySelector('.swt-welcome-notice #swt-install-spectra');\r\n\tif (InstallButton) {\r\n\t\tinstallStatusText = InstallButton.querySelector('.text');\r\n\t\tloadingIcon = InstallButton.querySelector('.dashicons');\r\n\t}\r\n\r\n\tconst hideAndRemoveNotice = () => {\r\n\t\tif (WelcomeNoticeContainer) {\r\n\t\t\tWelcomeNoticeContainer.remove();\r\n\t\t}\r\n\t};\r\n\r\n\tconst activateSpectra = async () => {\r\n\t\tinstallStatusText.textContent = activating;\r\n\t\tawait activatePlugin(activationUrl);\r\n\r\n\t\tif (loadingIcon) {\r\n\t\t\tloadingIcon.classList.remove('dashicons-update');\r\n\t\t\tloadingIcon.classList.add('dashicons-yes');\r\n\t\t}\r\n\r\n\t\tinstallStatusText.textContent = done;\r\n\t\tsetTimeout(hideAndRemoveNotice, 2000);\r\n\t};\r\n\r\n\tif (InstallButton) {\r\n\t\tInstallButton.addEventListener('click', async () => {\r\n\t\t\tloadingIcon.classList.remove('hidden');\r\n\t\t\tInstallButton.setAttribute('disabled', true);\r\n\r\n\t\t\tif (pluginStatus === 'installed') {\r\n\t\t\t\tawait activateSpectra();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tinstallStatusText.textContent = installing;\r\n\t\t\tawait installPlugin(pluginSlug);\r\n\t\t\tawait activateSpectra();\r\n\t\t});\r\n\t}\r\n\r\n\r\n\tCloseButton.addEventListener('click', async () => {\r\n\r\n\t\tconst res = {\r\n\t\t\tmethod: 'POST',\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'\r\n\t\t\t},\r\n\t\t\tbody: `action=swt_dismiss_welcome_notice&security=${nonce}`\r\n\t\t};\r\n\r\n\t\ttry {\r\n\t\t\tconst reqResponse = await fetch(ajaxUrl, res);\r\n\r\n\t\t\tif (200 === reqResponse.status) {\r\n\t\t\t\thideAndRemoveNotice();\r\n\t\t\t}\r\n\t\t} catch (err) {\r\n\r\n\t\t}\r\n\r\n\t});\r\n}\r\n\r\nasync function installPlugin(slug) {\r\n\treturn new Promise((resolve) => {\r\n\t\twp.updates.ajax('install-plugin', {\r\n\t\t\tslug,\r\n\t\t\tsuccess: () => {\r\n\t\t\t\tresolve({ success: true });\r\n\t\t\t},\r\n\t\t\terror: (err) => {\r\n\t\t\t\tresolve({ success: false, code: err.errorCode });\r\n\t\t\t},\r\n\t\t});\r\n\t});\r\n};\r\n\r\nasync function activatePlugin(url) {\r\n\r\n\ttry {\r\n\t\tconst reqResponse = await fetch(url)\r\n\r\n\t\tif (200 === reqResponse.status) {\r\n\t\t\treturn { success: true };\r\n\t\t}\r\n\t}\r\n\tcatch (err) {\r\n\t\treturn { success: false };\r\n\t}\r\n};"],"names":["document","addEventListener","handleWelcomeNotice","activating","installing","done","activationUrl","ajaxUrl","pluginSlug","nonce","pluginStatus","spectra","installStatusText","loadingIcon","CloseButton","querySelector","WelcomeNoticeContainer","InstallButton","hideAndRemoveNotice","remove","activateSpectra","textContent","activatePlugin","classList","add","setTimeout","setAttribute","installPlugin","res","method","headers","body","reqResponse","fetch","status","err","slug","Promise","resolve","wp","updates","ajax","success","error","code","errorCode","url"],"sourceRoot":""}