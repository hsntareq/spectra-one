{"version":3,"file":"welcome_notice.js","mappings":"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","sources":["webpack://spectra-theme/./src/admin/welcome-notice.js"],"sourcesContent":["function handleWelcomeNotice() {\r\n\tconst {\r\n\t\tactivating,\r\n\t\tinstalling,\r\n\t\tdone,\r\n\t\tactivationUrl,\r\n\t\tajaxUrl,\r\n\t\tpluginSlug,\r\n\t\tnonce,\r\n\t\tpluginStatus,\r\n\t} = spectra;\r\n\r\n\tlet installStatusText;\r\n\tlet loadingIcon;\r\n\tconst CloseButton = document.querySelector('.swt-welcome-notice .notice-dismiss');\r\n\tconst WelcomeNoticeContainer = document.querySelector('.swt-welcome-notice');\r\n\tconst InstallButton = document.querySelector('.swt-welcome-notice #swt-install-spectra');\r\n\tif (InstallButton) {\r\n\t\tinstallStatusText = InstallButton.querySelector('.text');\r\n\t\tloadingIcon = InstallButton.querySelector('.dashicons');\r\n\t}\r\n\r\n\tconst hideAndRemoveNotice = () => {\r\n\t\tif (WelcomeNoticeContainer) {\r\n\t\t\tWelcomeNoticeContainer.remove();\r\n\t\t}\r\n\t};\r\n\r\n\tconst activateSpectra = async () => {\r\n\t\tinstallStatusText.textContent = activating;\r\n\t\tawait activatePlugin(activationUrl);\r\n\r\n\t\tif (loadingIcon) {\r\n\t\t\tloadingIcon.classList.remove('dashicons-update');\r\n\t\t\tloadingIcon.classList.add('dashicons-yes');\r\n\t\t}\r\n\r\n\t\tinstallStatusText.textContent = done;\r\n\t\tsetTimeout(hideAndRemoveNotice, 2000);\r\n\t};\r\n\r\n\tif (InstallButton) {\r\n\t\tInstallButton.addEventListener('click', async () => {\r\n\t\t\tloadingIcon.classList.remove('hidden');\r\n\t\t\tInstallButton.setAttribute('disabled', true);\r\n\r\n\t\t\tif (pluginStatus === 'installed') {\r\n\t\t\t\tawait activateSpectra();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tinstallStatusText.textContent = installing;\r\n\t\t\tawait installPlugin(pluginSlug);\r\n\t\t\tawait activateSpectra();\r\n\t\t});\r\n\t}\r\n\r\n\r\n\tCloseButton.addEventListener('click', async () => {\r\n\r\n\t\tconst res = {\r\n\t\t\tmethod: 'POST',\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'\r\n\t\t\t},\r\n\t\t\tbody: `action=swt_dismiss_welcome_notice&security=${nonce}`\r\n\t\t};\r\n\r\n\t\ttry {\r\n\t\t\tconst reqResponse = await fetch(ajaxUrl, res);\r\n\r\n\t\t\tif (200 === reqResponse.status) {\r\n\t\t\t\thideAndRemoveNotice();\r\n\t\t\t}\r\n\t\t} catch(err) {\r\n\r\n\t\t}\r\n\r\n\t});\r\n}\r\n\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n\thandleWelcomeNotice();\r\n});\r\n\r\nasync function installPlugin(slug) {\r\n\treturn new Promise((resolve) => {\r\n\t\twp.updates.ajax('install-plugin', {\r\n\t\t\tslug,\r\n\t\t\tsuccess: () => {\r\n\t\t\t\tresolve({ success: true });\r\n\t\t\t},\r\n\t\t\terror: (err) => {\r\n\t\t\t\tresolve({ success: false, code: err.errorCode });\r\n\t\t\t},\r\n\t\t});\r\n\t});\r\n};\r\n\r\nasync function activatePlugin(url) {\r\n\r\n\ttry {\r\n\t\tconst reqResponse = await fetch(url)\r\n\r\n\t\tif (200 === reqResponse.status) {\r\n\t\t\treturn { success: true };\r\n\t\t}\r\n\t}\r\n\tcatch (err) {\r\n\t\treturn { success: false };\r\n\t}\r\n};"],"names":["handleWelcomeNotice","activating","installing","done","activationUrl","ajaxUrl","pluginSlug","nonce","pluginStatus","spectra","installStatusText","loadingIcon","CloseButton","document","querySelector","WelcomeNoticeContainer","InstallButton","hideAndRemoveNotice","remove","activateSpectra","textContent","activatePlugin","classList","add","setTimeout","addEventListener","setAttribute","installPlugin","res","method","headers","body","reqResponse","fetch","status","err","slug","Promise","resolve","wp","updates","ajax","success","error","code","errorCode","url"],"sourceRoot":""}