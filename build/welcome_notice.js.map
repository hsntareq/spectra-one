{"version":3,"file":"welcome_notice.js","mappings":"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","sources":["webpack://spectra-one/./src/admin/welcome-notice.js"],"sourcesContent":["document.addEventListener( 'DOMContentLoaded', () => {\n\thandleWelcomeNotice();\n} );\n\nfunction handleWelcomeNotice() {\n\tconst {\n\t\tactivating,\n\t\tinstalling,\n\t\tdone,\n\t\tactivationUrl,\n\t\tajaxUrl,\n\t\tpluginSlug,\n\t\tnonce,\n\t\tpluginStatus,\n\t} = spectraOne;\n\n\tlet installStatusText;\n\tconst CloseButton = document.querySelector(\n\t\t'.swt-welcome-notice .notice-dismiss'\n\t);\n\tconst WelcomeNoticeContainer = document.querySelector(\n\t\t'.swt-welcome-notice'\n\t);\n\tconst InstallButton = document.querySelector(\n\t\t'.swt-welcome-notice #swt-install-spectra'\n\t);\n\tif ( InstallButton ) {\n\t\tinstallStatusText = InstallButton.querySelector( '.text' );\n\t}\n\n\tconst hideAndRemoveNotice = () => {\n\t\tif ( WelcomeNoticeContainer ) {\n\t\t\tWelcomeNoticeContainer.remove();\n\t\t}\n\t};\n\n\tconst activateSpectra = async () => {\n\t\tinstallStatusText.textContent = activating;\n\t\tawait activatePlugin( activationUrl );\n\n\t\tInstallButton.classList.remove( 'updating-message' );\n\t\tInstallButton.classList.add( 'updated-message' );\n\n\t\tinstallStatusText.textContent = done;\n\t\tsetTimeout( hideAndRemoveNotice, 2000 );\n\t};\n\n\tif ( InstallButton ) {\n\t\tInstallButton.addEventListener( 'click', async () => {\n\t\t\tInstallButton.classList.add( 'updating-message' );\n\t\t\tInstallButton.classList.add( 'disabled' );\n\n\t\t\tif ( pluginStatus === 'installed' ) {\n\t\t\t\tawait activateSpectra();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tinstallStatusText.textContent = installing;\n\t\t\tawait installPlugin( pluginSlug );\n\t\t\tawait activateSpectra();\n\t\t} );\n\t}\n\n\tCloseButton.addEventListener( 'click', async () => {\n\t\tconst res = {\n\t\t\tmethod: 'POST',\n\t\t\theaders: {\n\t\t\t\t'Content-Type':\n\t\t\t\t\t'application/x-www-form-urlencoded; charset=UTF-8',\n\t\t\t},\n\t\t\tbody: `action=swt_dismiss_welcome_notice&nonce=${ nonce }`,\n\t\t};\n\n\t\ttry {\n\t\t\tconst reqResponse = await fetch( ajaxUrl, res );\n\n\t\t\tif ( 200 === reqResponse.status ) {\n\t\t\t\thideAndRemoveNotice();\n\t\t\t}\n\t\t} catch ( err ) {}\n\t} );\n}\n\nasync function installPlugin( slug ) {\n\treturn new Promise( ( resolve ) => {\n\t\twp.updates.ajax( 'install-plugin', {\n\t\t\tslug,\n\t\t\tsuccess: () => {\n\t\t\t\tresolve( { success: true } );\n\t\t\t},\n\t\t\terror: ( err ) => {\n\t\t\t\tresolve( { success: false, code: err.errorCode } );\n\t\t\t},\n\t\t} );\n\t} );\n}\n\nasync function activatePlugin( url ) {\n\ttry {\n\t\tconst reqResponse = await fetch( url );\n\n\t\tif ( 200 === reqResponse.status ) {\n\t\t\treturn { success: true };\n\t\t}\n\t} catch ( err ) {\n\t\treturn { success: false };\n\t}\n}\n"],"names":["document","addEventListener","handleWelcomeNotice","activating","installing","done","activationUrl","ajaxUrl","pluginSlug","nonce","pluginStatus","spectraOne","installStatusText","CloseButton","querySelector","WelcomeNoticeContainer","InstallButton","hideAndRemoveNotice","remove","activateSpectra","textContent","activatePlugin","classList","add","setTimeout","installPlugin","res","method","headers","body","reqResponse","fetch","status","err","slug","Promise","resolve","wp","updates","ajax","success","error","code","errorCode","url"],"sourceRoot":""}